<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Executive Portfolio Assistant</title>
  <link rel="stylesheet" href="css/styles.css" />
</head>

<body>

  <!-- Login screen -->
  <div id="login-screen">
    <input type="text" id="token-input" placeholder="Enter your token" />
    <button id="login-btn">Login</button>
    <p id="login-error" style="color:red; display:none;"></p>
  </div>

  <div id="app-screen" style="display:none;">
    <nav>
      <button onclick="showTab('advisor')">Investment Adviser</button>
      <button onclick="showTab('portfolio')">Portfolio Manager</button>
      <button onclick="showTab('archive')">Archives</button>
    </nav>

    <main>
      <!-- Advisor -->
      <section id="advisor" class="tab">
        <h1>Ask a Question</h1>
        <select id="portfolio-select"></select>
        <textarea id="question" placeholder="e.g. Should I worry about my bond holdings?"></textarea>
        <button onclick="submitPrompt()">Submit</button>
        <div id="response"></div>
      </section>

      <!-- Portfolio -->
      <section id="portfolio" class="tab hidden">
        <h1>Manage Portfolio</h1>
        <input id="portfolio-name" placeholder="Portfolio Name" />
        <button onclick="createPortfolio()">Create Portfolio</button>
        <button onclick="deletePortfolio()">Delete Portfolio</button>
        <select id="portfolio-dropdown" onchange="loadPortfolio()"></select>
        <table id="asset-table">
          <thead>
            <tr>
              <th>Ticker</th>
              <th>Name</th>
              <th>Type</th>
              <th>Sector</th>
              <th>Region</th>
              <th>Price</th>
              <th>Units</th>
              <th>Hedge?</th>
              <th>Hedges</th>
              <th>Total Value</th>
              <th>% of Total</th>
              <th>Delete</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
        <button onclick="addAssetRow()">+ Add Asset</button>
        <button onclick="saveAssets()">Save Assets</button>
      </section>

      <!-- Archives -->
      <section id="archive" class="tab hidden">
        <h1>Archived Advice</h1>
        <select id="archive-list" onchange="loadArchive()"></select>
        <div id="archive-viewer"></div>
      </section>
    </main>
  </div>
  <!-- Module scripts -->
  <script type="module">
    import "./js/login.js";
    import { showTab } from "./js/main.js";
    import "./js/portfolio.js";
    import "./js/advisor.js";
    import "./js/archive.js";
    window.showTab = showTab;
  </script>

</body>

</html>